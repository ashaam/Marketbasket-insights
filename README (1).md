{
 "cells": [
  {
   "cell_type": "markdown",
   "metadata": {},
   "source": [
    "# Market Basket Analysis 101 with Real Example"
   ]
  },
  {
   "cell_type": "markdown",
   "metadata": {},
   "source": [
    "### Association rules, Lift, Confidence, Support"
   ]
  },
  {
   "cell_type": "markdown",
   "metadata": {},
   "source": [
    "## Table of Content\n",
    "1. Introduction\n",
    "2. What is Market Basket Analysis?\n",
    "3. Import Library / Data\n",
    "4. Data pre-processing\n",
    "5. Association Rules in Python\n",
    "6. Deriving Association Rules\n",
    "7. Findings / Conclusion"
   ]
  },
  {
   "cell_type": "markdown",
   "metadata": {},
   "source": [
    "## 1.0 Introduction"
   ]
  },
  {
   "cell_type": "markdown",
   "metadata": {},
   "source": [
    "Another exciting topic in marketing analytics is Market Basket Analysis. This is the topic of this publication. At the beginning of this post I will be introducing some key terms and metrics aimed at giving a sense of what â€œassociationâ€ in a rule means and some ways to quantify the strength of this association. Then I will show how to generate these rules from the dataset â€˜Online Retailâ€™ using the Apriori Algorithm.\n",
    "\n",
    "For this post the dataset Online Retail from the statistic platform â€œKaggleâ€ was used. You can download it from my â€œGitHub Repositoryâ€."
   ]
  },
  {
   "cell_type": "markdown",
   "metadata": {},
   "source": [
    "## 2.0 What is Market Basket Analysis?"
   ]
  },
  {
   "cell_type": "markdown",
   "metadata": {},
   "source": [
    "Market Basket Analysis is a analysis technique which identifies the strength of association between pairs of products purchased together and identify patterns of co-occurrence.\n",
    "\n",
    "Market Basket Analysis creates If-Then scenario rules (association rules), for example, if item A is purchased then item B is likely to be purchased. The rules are probabilistic in nature or, in other words, they are derived from the frequencies of co-occurrence in the observations. Frequency is the proportion of baskets that contain the items of interest. The rules can be used in pricing strategies, product placement, and various types of cross-selling strategies."
   ]
  },
  {
   "cell_type": "markdown",
   "metadata": {},
   "source": [
    "How association rules work\n",
    "\n",
    "Association rule mining, at a basic level, involves the use of machine learning models to analyze data for patterns, or co-occurrences, in a database. It identifies frequent if-then associations, which themselves are the association rules.\n",
    "\n",
    "An association rule has two parts: an antecedent (if) and a consequent (then). An antecedent is an item found within the data. A consequent is an item found in combination with the antecedent.\n",
    "\n",
    "Association rules are created by searching data for frequent if-then patterns and using the criteria support and confidence to identify the most important relationships. Support is an indication of how frequently the items appear in the data. Confidence indicates the number of times the if-then statements are found true. A third metric, called lift, can be used to compare confidence with expected confidence, or how many times an if-then statement is expected to be found true.\n",
    "\n",
    "Association rules are calculated from itemsets, which are made up of two or more items. If rules are built from analyzing all the possible itemsets, there could be so many rules that the rules hold little meaning. With that, association rules are typically created from rules well-represented in data.\n",
    "\n",
    "More about association rule can be found on https://michael-fuchs-python.netlify.app/2020/09/15/marketing-market-basket-analysis/"
   ]
  },
  {
   "cell_type": "markdown",
   "metadata": {},
   "source": [
    "# 3.0 Dive into code - Import Libraries / Data"
   ]
  },
  {
   "cell_type": "code",
   "execution_count": 9,
   "metadata": {},
   "outputs": [],
   "source": [
    "import gc\n",
    "import os\n",
    "import time\n",
    "import numpy as np\n",
    "import pandas as pd\n",
    "import matplotlib.pyplot as plt\n",
    "import seaborn as sns\n",
    "import datetime as dt\n",
    "import mlxtend.preprocessing\n",
    "import mlxtend.frequent_patterns"
   ]
  },
  {
   "cell_type": "code",
   "execution_count": 14,
   "metadata": {},
   "outputs": [
    {
     "data": {
      "text/html": [
       "<div>\n",
       "<style scoped>\n",
       "    .dataframe tbody tr th:only-of-type {\n",
       "        vertical-align: middle;\n",
       "    }\n",
       "\n",
       "    .dataframe tbody tr th {\n",
       "        vertical-align: top;\n",
       "    }\n",
       "\n",
       "    .dataframe thead th {\n",
       "        text-align: right;\n",
       "    }\n",
       "</style>\n",
       "<table border=\"1\" class=\"dataframe\">\n",
       "  <thead>\n",
       "    <tr style=\"text-align: right;\">\n",
       "      <th></th>\n",
       "      <th>InvoiceNo</th>\n",
       "      <th>StockCode</th>\n",
       "      <th>Description</th>\n",
       "      <th>Quantity</th>\n",
       "      <th>InvoiceDate</th>\n",
       "      <th>UnitPrice</th>\n",
       "      <th>CustomerID</th>\n",
       "      <th>Country</th>\n",
       "    </tr>\n",
       "  </thead>\n",
       "  <tbody>\n",
       "    <tr>\n",
       "      <th>0</th>\n",
       "      <td>536365</td>\n",
       "      <td>85123A</td>\n",
       "      <td>WHITE HANGING HEART T-LIGHT HOLDER</td>\n",
       "      <td>6</td>\n",
       "      <td>2010-12-01 08:26:00</td>\n",
       "      <td>2.55</td>\n",
       "      <td>17850.0</td>\n",
       "      <td>United Kingdom</td>\n",
       "    </tr>\n",
       "    <tr>\n",
       "      <th>1</th>\n",
       "      <td>536365</td>\n",
       "      <td>71053</td>\n",
       "      <td>WHITE METAL LANTERN</td>\n",
       "      <td>6</td>\n",
       "      <td>2010-12-01 08:26:00</td>\n",
       "      <td>3.39</td>\n",
       "      <td>17850.0</td>\n",
       "      <td>United Kingdom</td>\n",
       "    </tr>\n",
       "    <tr>\n",
       "      <th>2</th>\n",
       "      <td>536365</td>\n",
       "      <td>84406B</td>\n",
       "      <td>CREAM CUPID HEARTS COAT HANGER</td>\n",
       "      <td>8</td>\n",
       "      <td>2010-12-01 08:26:00</td>\n",
       "      <td>2.75</td>\n",
       "      <td>17850.0</td>\n",
       "      <td>United Kingdom</td>\n",
       "    </tr>\n",
       "    <tr>\n",
       "      <th>3</th>\n",
       "      <td>536365</td>\n",
       "      <td>84029G</td>\n",
       "      <td>KNITTED UNION FLAG HOT WATER BOTTLE</td>\n",
       "      <td>6</td>\n",
       "      <td>2010-12-01 08:26:00</td>\n",
       "      <td>3.39</td>\n",
       "      <td>17850.0</td>\n",
       "      <td>United Kingdom</td>\n",
       "    </tr>\n",
       "    <tr>\n",
       "      <th>4</th>\n",
       "      <td>536365</td>\n",
       "      <td>84029E</td>\n",
       "      <td>RED WOOLLY HOTTIE WHITE HEART.</td>\n",
       "      <td>6</td>\n",
       "      <td>2010-12-01 08:26:00</td>\n",
       "      <td>3.39</td>\n",
       "      <td>17850.0</td>\n",
       "      <td>United Kingdom</td>\n",
       "    </tr>\n",
       "    <tr>\n",
       "      <th>...</th>\n",
       "      <td>...</td>\n",
       "      <td>...</td>\n",
       "      <td>...</td>\n",
       "      <td>...</td>\n",
       "      <td>...</td>\n",
       "      <td>...</td>\n",
       "      <td>...</td>\n",
       "      <td>...</td>\n",
       "    </tr>\n",
       "    <tr>\n",
       "      <th>541904</th>\n",
       "      <td>581587</td>\n",
       "      <td>22613</td>\n",
       "      <td>PACK OF 20 SPACEBOY NAPKINS</td>\n",
       "      <td>12</td>\n",
       "      <td>2011-12-09 12:50:00</td>\n",
       "      <td>0.85</td>\n",
       "      <td>12680.0</td>\n",
       "      <td>France</td>\n",
       "    </tr>\n",
       "    <tr>\n",
       "      <th>541905</th>\n",
       "      <td>581587</td>\n",
       "      <td>22899</td>\n",
       "      <td>CHILDREN'S APRON DOLLY GIRL</td>\n",
       "      <td>6</td>\n",
       "      <td>2011-12-09 12:50:00</td>\n",
       "      <td>2.10</td>\n",
       "      <td>12680.0</td>\n",
       "      <td>France</td>\n",
       "    </tr>\n",
       "    <tr>\n",
       "      <th>541906</th>\n",
       "      <td>581587</td>\n",
       "      <td>23254</td>\n",
       "      <td>CHILDRENS CUTLERY DOLLY GIRL</td>\n",
       "      <td>4</td>\n",
       "      <td>2011-12-09 12:50:00</td>\n",
       "      <td>4.15</td>\n",
       "      <td>12680.0</td>\n",
       "      <td>France</td>\n",
       "    </tr>\n",
       "    <tr>\n",
       "      <th>541907</th>\n",
       "      <td>581587</td>\n",
       "      <td>23255</td>\n",
       "      <td>CHILDRENS CUTLERY CIRCUS PARADE</td>\n",
       "      <td>4</td>\n",
       "      <td>2011-12-09 12:50:00</td>\n",
       "      <td>4.15</td>\n",
       "      <td>12680.0</td>\n",
       "      <td>France</td>\n",
       "    </tr>\n",
       "    <tr>\n",
       "      <th>541908</th>\n",
       "      <td>581587</td>\n",
       "      <td>22138</td>\n",
       "      <td>BAKING SET 9 PIECE RETROSPOT</td>\n",
       "      <td>3</td>\n",
       "      <td>2011-12-09 12:50:00</td>\n",
       "      <td>4.95</td>\n",
       "      <td>12680.0</td>\n",
       "      <td>France</td>\n",
       "    </tr>\n",
       "  </tbody>\n",
       "</table>\n",
       "<p>541909 rows Ã— 8 columns</p>\n",
       "</div>"
      ],
      "text/plain": [
       "       InvoiceNo StockCode                          Description  Quantity  \\\n",
       "0         536365    85123A   WHITE HANGING HEART T-LIGHT HOLDER         6   \n",
       "1         536365     71053                  WHITE METAL LANTERN         6   \n",
       "2         536365    84406B       CREAM CUPID HEARTS COAT HANGER         8   \n",
       "3         536365    84029G  KNITTED UNION FLAG HOT WATER BOTTLE         6   \n",
       "4         536365    84029E       RED WOOLLY HOTTIE WHITE HEART.         6   \n",
       "...          ...       ...                                  ...       ...   \n",
       "541904    581587     22613          PACK OF 20 SPACEBOY NAPKINS        12   \n",
       "541905    581587     22899         CHILDREN'S APRON DOLLY GIRL          6   \n",
       "541906    581587     23254        CHILDRENS CUTLERY DOLLY GIRL          4   \n",
       "541907    581587     23255      CHILDRENS CUTLERY CIRCUS PARADE         4   \n",
       "541908    581587     22138        BAKING SET 9 PIECE RETROSPOT          3   \n",
       "\n",
       "               InvoiceDate  UnitPrice  CustomerID         Country  \n",
       "0      2010-12-01 08:26:00       2.55     17850.0  United Kingdom  \n",
       "1      2010-12-01 08:26:00       3.39     17850.0  United Kingdom  \n",
       "2      2010-12-01 08:26:00       2.75     17850.0  United Kingdom  \n",
       "3      2010-12-01 08:26:00       3.39     17850.0  United Kingdom  \n",
       "4      2010-12-01 08:26:00       3.39     17850.0  United Kingdom  \n",
       "...                    ...        ...         ...             ...  \n",
       "541904 2011-12-09 12:50:00       0.85     12680.0          France  \n",
       "541905 2011-12-09 12:50:00       2.10     12680.0          France  \n",
       "541906 2011-12-09 12:50:00       4.15     12680.0          France  \n",
       "541907 2011-12-09 12:50:00       4.15     12680.0          France  \n",
       "541908 2011-12-09 12:50:00       4.95     12680.0          France  \n",
       "\n",
       "[541909 rows x 8 columns]"
      ]
     },
     "execution_count": 14,
     "metadata": {},
     "output_type": "execute_result"
    }
   ],
   "source": [
    "df = pd.read_excel(\"./data/Retail.xlsx\", sheet_name=\"Online Retail\")\n",
    "df"
   ]
  },
  {
   "cell_type": "code",
   "execution_count": 15,
   "metadata": {},
   "outputs": [
    {
     "data": {
      "text/plain": [
       "(541909, 8)"
      ]
     },
     "execution_count": 15,
     "metadata": {},
     "output_type": "execute_result"
    }
   ],
   "source": [
    "df.shape"
   ]
  },
  {
   "cell_type": "code",
   "execution_count": 16,
   "metadata": {},
   "outputs": [
    {
     "data": {
      "text/html": [
       "<div>\n",
       "<style scoped>\n",
       "    .dataframe tbody tr th:only-of-type {\n",
       "        vertical-align: middle;\n",
       "    }\n",
       "\n",
       "    .dataframe tbody tr th {\n",
       "        vertical-align: top;\n",
       "    }\n",
       "\n",
       "    .dataframe thead th {\n",
       "        text-align: right;\n",
       "    }\n",
       "</style>\n",
       "<table border=\"1\" class=\"dataframe\">\n",
       "  <thead>\n",
       "    <tr style=\"text-align: right;\">\n",
       "      <th></th>\n",
       "      <th>Quantity</th>\n",
       "      <th>UnitPrice</th>\n",
       "      <th>CustomerID</th>\n",
       "    </tr>\n",
       "  </thead>\n",
       "  <tbody>\n",
       "    <tr>\n",
       "      <th>count</th>\n",
       "      <td>541909.000000</td>\n",
       "      <td>541909.000000</td>\n",
       "      <td>406829.000000</td>\n",
       "    </tr>\n",
       "    <tr>\n",
       "      <th>mean</th>\n",
       "      <td>9.552250</td>\n",
       "      <td>4.611114</td>\n",
       "      <td>15287.690570</td>\n",
       "    </tr>\n",
       "    <tr>\n",
       "      <th>std</th>\n",
       "      <td>218.081158</td>\n",
       "      <td>96.759853</td>\n",
       "      <td>1713.600303</td>\n",
       "    </tr>\n",
       "    <tr>\n",
       "      <th>min</th>\n",
       "      <td>-80995.000000</td>\n",
       "      <td>-11062.060000</td>\n",
       "      <td>12346.000000</td>\n",
       "    </tr>\n",
       "    <tr>\n",
       "      <th>25%</th>\n",
       "      <td>1.000000</td>\n",
       "      <td>1.250000</td>\n",
       "      <td>13953.000000</td>\n",
       "    </tr>\n",
       "    <tr>\n",
       "      <th>50%</th>\n",
       "      <td>3.000000</td>\n",
       "      <td>2.080000</td>\n",
       "      <td>15152.000000</td>\n",
       "    </tr>\n",
       "    <tr>\n",
       "      <th>75%</th>\n",
       "      <td>10.000000</td>\n",
       "      <td>4.130000</td>\n",
       "      <td>16791.000000</td>\n",
       "    </tr>\n",
       "    <tr>\n",
       "      <th>max</th>\n",
       "      <td>80995.000000</td>\n",
       "      <td>38970.000000</td>\n",
       "      <td>18287.000000</td>\n",
       "    </tr>\n",
       "  </tbody>\n",
       "</table>\n",
       "</div>"
      ],
      "text/plain": [
       "            Quantity      UnitPrice     CustomerID\n",
       "count  541909.000000  541909.000000  406829.000000\n",
       "mean        9.552250       4.611114   15287.690570\n",
       "std       218.081158      96.759853    1713.600303\n",
       "min    -80995.000000  -11062.060000   12346.000000\n",
       "25%         1.000000       1.250000   13953.000000\n",
       "50%         3.000000       2.080000   15152.000000\n",
       "75%        10.000000       4.130000   16791.000000\n",
       "max     80995.000000   38970.000000   18287.000000"
      ]
     },
     "execution_count": 16,
     "metadata": {},
     "output_type": "execute_result"
    }
   ],
   "source": [
    "df.describe()"
   ]
  },
  {
   "cell_type": "markdown",
   "metadata": {},
   "source": [
    "# 4.0 Preprocess the dataset"
   ]
  },
  {
   "cell_type": "code",
   "execution_count": 17,
   "metadata": {},
   "outputs": [
    {
     "data": {
      "text/html": [
       "<div>\n",
       "<style scoped>\n",
       "    .dataframe tbody tr th:only-of-type {\n",
       "        vertical-align: middle;\n",
       "    }\n",
       "\n",
       "    .dataframe tbody tr th {\n",
       "        vertical-align: top;\n",
       "    }\n",
       "\n",
       "    .dataframe thead th {\n",
       "        text-align: right;\n",
       "    }\n",
       "</style>\n",
       "<table border=\"1\" class=\"dataframe\">\n",
       "  <thead>\n",
       "    <tr style=\"text-align: right;\">\n",
       "      <th></th>\n",
       "      <th>InvoiceNo</th>\n",
       "      <th>StockCode</th>\n",
       "      <th>Description</th>\n",
       "      <th>Quantity</th>\n",
       "      <th>InvoiceDate</th>\n",
       "      <th>UnitPrice</th>\n",
       "      <th>CustomerID</th>\n",
       "      <th>Country</th>\n",
       "      <th>Is_C_Present</th>\n",
       "    </tr>\n",
       "  </thead>\n",
       "  <tbody>\n",
       "    <tr>\n",
       "      <th>0</th>\n",
       "      <td>536365</td>\n",
       "      <td>85123A</td>\n",
       "      <td>WHITE HANGING HEART T-LIGHT HOLDER</td>\n",
       "      <td>6</td>\n",
       "      <td>2010-12-01 08:26:00</td>\n",
       "      <td>2.55</td>\n",
       "      <td>17850.0</td>\n",
       "      <td>United Kingdom</td>\n",
       "      <td>0</td>\n",
       "    </tr>\n",
       "    <tr>\n",
       "      <th>1</th>\n",
       "      <td>536365</td>\n",
       "      <td>71053</td>\n",
       "      <td>WHITE METAL LANTERN</td>\n",
       "      <td>6</td>\n",
       "      <td>2010-12-01 08:26:00</td>\n",
       "      <td>3.39</td>\n",
       "      <td>17850.0</td>\n",
       "      <td>United Kingdom</td>\n",
       "      <td>0</td>\n",
       "    </tr>\n",
       "    <tr>\n",
       "      <th>2</th>\n",
       "      <td>536365</td>\n",
       "      <td>84406B</td>\n",
       "      <td>CREAM CUPID HEARTS COAT HANGER</td>\n",
       "      <td>8</td>\n",
       "      <td>2010-12-01 08:26:00</td>\n",
       "      <td>2.75</td>\n",
       "      <td>17850.0</td>\n",
       "      <td>United Kingdom</td>\n",
       "      <td>0</td>\n",
       "    </tr>\n",
       "    <tr>\n",
       "      <th>3</th>\n",
       "      <td>536365</td>\n",
       "      <td>84029G</td>\n",
       "      <td>KNITTED UNION FLAG HOT WATER BOTTLE</td>\n",
       "      <td>6</td>\n",
       "      <td>2010-12-01 08:26:00</td>\n",
       "      <td>3.39</td>\n",
       "      <td>17850.0</td>\n",
       "      <td>United Kingdom</td>\n",
       "      <td>0</td>\n",
       "    </tr>\n",
       "    <tr>\n",
       "      <th>4</th>\n",
       "      <td>536365</td>\n",
       "      <td>84029E</td>\n",
       "      <td>RED WOOLLY HOTTIE WHITE HEART.</td>\n",
       "      <td>6</td>\n",
       "      <td>2010-12-01 08:26:00</td>\n",
       "      <td>3.39</td>\n",
       "      <td>17850.0</td>\n",
       "      <td>United Kingdom</td>\n",
       "      <td>0</td>\n",
       "    </tr>\n",
       "    <tr>\n",
       "      <th>...</th>\n",
       "      <td>...</td>\n",
       "      <td>...</td>\n",
       "      <td>...</td>\n",
       "      <td>...</td>\n",
       "      <td>...</td>\n",
       "      <td>...</td>\n",
       "      <td>...</td>\n",
       "      <td>...</td>\n",
       "      <td>...</td>\n",
       "    </tr>\n",
       "    <tr>\n",
       "      <th>541904</th>\n",
       "      <td>581587</td>\n",
       "      <td>22613</td>\n",
       "      <td>PACK OF 20 SPACEBOY NAPKINS</td>\n",
       "      <td>12</td>\n",
       "      <td>2011-12-09 12:50:00</td>\n",
       "      <td>0.85</td>\n",
       "      <td>12680.0</td>\n",
       "      <td>France</td>\n",
       "      <td>0</td>\n",
       "    </tr>\n",
       "    <tr>\n",
       "      <th>541905</th>\n",
       "      <td>581587</td>\n",
       "      <td>22899</td>\n",
       "      <td>CHILDREN'S APRON DOLLY GIRL</td>\n",
       "      <td>6</td>\n",
       "      <td>2011-12-09 12:50:00</td>\n",
       "      <td>2.10</td>\n",
       "      <td>12680.0</td>\n",
       "      <td>France</td>\n",
       "      <td>0</td>\n",
       "    </tr>\n",
       "    <tr>\n",
       "      <th>541906</th>\n",
       "      <td>581587</td>\n",
       "      <td>23254</td>\n",
       "      <td>CHILDRENS CUTLERY DOLLY GIRL</td>\n",
       "      <td>4</td>\n",
       "      <td>2011-12-09 12:50:00</td>\n",
       "      <td>4.15</td>\n",
       "      <td>12680.0</td>\n",
       "      <td>France</td>\n",
       "      <td>0</td>\n",
       "    </tr>\n",
       "    <tr>\n",
       "      <th>541907</th>\n",
       "      <td>581587</td>\n",
       "      <td>23255</td>\n",
       "      <td>CHILDRENS CUTLERY CIRCUS PARADE</td>\n",
       "      <td>4</td>\n",
       "      <td>2011-12-09 12:50:00</td>\n",
       "      <td>4.15</td>\n",
       "      <td>12680.0</td>\n",
       "      <td>France</td>\n",
       "      <td>0</td>\n",
       "    </tr>\n",
       "    <tr>\n",
       "      <th>541908</th>\n",
       "      <td>581587</td>\n",
       "      <td>22138</td>\n",
       "      <td>BAKING SET 9 PIECE RETROSPOT</td>\n",
       "      <td>3</td>\n",
       "      <td>2011-12-09 12:50:00</td>\n",
       "      <td>4.95</td>\n",
       "      <td>12680.0</td>\n",
       "      <td>France</td>\n",
       "      <td>0</td>\n",
       "    </tr>\n",
       "  </tbody>\n",
       "</table>\n",
       "<p>541909 rows Ã— 9 columns</p>\n",
       "</div>"
      ],
      "text/plain": [
       "       InvoiceNo StockCode                          Description  Quantity  \\\n",
       "0         536365    85123A   WHITE HANGING HEART T-LIGHT HOLDER         6   \n",
       "1         536365     71053                  WHITE METAL LANTERN         6   \n",
       "2         536365    84406B       CREAM CUPID HEARTS COAT HANGER         8   \n",
       "3         536365    84029G  KNITTED UNION FLAG HOT WATER BOTTLE         6   \n",
       "4         536365    84029E       RED WOOLLY HOTTIE WHITE HEART.         6   \n",
       "...          ...       ...                                  ...       ...   \n",
       "541904    581587     22613          PACK OF 20 SPACEBOY NAPKINS        12   \n",
       "541905    581587     22899         CHILDREN'S APRON DOLLY GIRL          6   \n",
       "541906    581587     23254        CHILDRENS CUTLERY DOLLY GIRL          4   \n",
       "541907    581587     23255      CHILDRENS CUTLERY CIRCUS PARADE         4   \n",
       "541908    581587     22138        BAKING SET 9 PIECE RETROSPOT          3   \n",
       "\n",
       "               InvoiceDate  UnitPrice  CustomerID         Country  \\\n",
       "0      2010-12-01 08:26:00       2.55     17850.0  United Kingdom   \n",
       "1      2010-12-01 08:26:00       3.39     17850.0  United Kingdom   \n",
       "2      2010-12-01 08:26:00       2.75     17850.0  United Kingdom   \n",
       "3      2010-12-01 08:26:00       3.39     17850.0  United Kingdom   \n",
       "4      2010-12-01 08:26:00       3.39     17850.0  United Kingdom   \n",
       "...                    ...        ...         ...             ...   \n",
       "541904 2011-12-09 12:50:00       0.85     12680.0          France   \n",
       "541905 2011-12-09 12:50:00       2.10     12680.0          France   \n",
       "541906 2011-12-09 12:50:00       4.15     12680.0          France   \n",
       "541907 2011-12-09 12:50:00       4.15     12680.0          France   \n",
       "541908 2011-12-09 12:50:00       4.95     12680.0          France   \n",
       "\n",
       "        Is_C_Present  \n",
       "0                  0  \n",
       "1                  0  \n",
       "2                  0  \n",
       "3                  0  \n",
       "4                  0  \n",
       "...              ...  \n",
       "541904             0  \n",
       "541905             0  \n",
       "541906             0  \n",
       "541907             0  \n",
       "541908             0  \n",
       "\n",
       "[541909 rows x 9 columns]"
      ]
     },
     "execution_count": 17,
     "metadata": {},
     "output_type": "execute_result"
    }
   ],
   "source": [
    "'''\n",
    "Create an indicator column stipulating whether the invoice number begins with 'C'\n",
    "'''\n",
    "\n",
    "df['Is_C_Present'] = (\n",
    "    df['InvoiceNo']\n",
    "    .astype(str)\n",
    "    .apply(lambda x: 1 if x.find('C') != -1 else 0))\n",
    "\n",
    "df"
   ]
  },
  {
   "cell_type": "code",
   "execution_count": 10,
   "metadata": {},
   "outputs": [
    {
     "data": {
      "text/plain": [
       "<bound method IndexOpsMixin.value_counts of 0         0\n",
       "1         0\n",
       "2         0\n",
       "3         0\n",
       "4         0\n",
       "         ..\n",
       "541904    0\n",
       "541905    0\n",
       "541906    0\n",
       "541907    0\n",
       "541908    0\n",
       "Name: Is_C_Present, Length: 541909, dtype: int64>"
      ]
     },
     "execution_count": 10,
     "metadata": {},
     "output_type": "execute_result"
    }
   ],
   "source": [
    "df.Is_C_Present.value_counts"
   ]
  },
  {
   "cell_type": "code",
   "execution_count": 18,
   "metadata": {},
   "outputs": [
    {
     "data": {
      "text/html": [
       "<div>\n",
       "<style scoped>\n",
       "    .dataframe tbody tr th:only-of-type {\n",
       "        vertical-align: middle;\n",
       "    }\n",
       "\n",
       "    .dataframe tbody tr th {\n",
       "        vertical-align: top;\n",
       "    }\n",
       "\n",
       "    .dataframe thead th {\n",
       "        text-align: right;\n",
       "    }\n",
       "</style>\n",
       "<table border=\"1\" class=\"dataframe\">\n",
       "  <thead>\n",
       "    <tr style=\"text-align: right;\">\n",
       "      <th></th>\n",
       "      <th>InvoiceNo</th>\n",
       "      <th>Description</th>\n",
       "    </tr>\n",
       "  </thead>\n",
       "  <tbody>\n",
       "    <tr>\n",
       "      <th>0</th>\n",
       "      <td>536365</td>\n",
       "      <td>WHITE HANGING HEART T-LIGHT HOLDER</td>\n",
       "    </tr>\n",
       "    <tr>\n",
       "      <th>1</th>\n",
       "      <td>536365</td>\n",
       "      <td>WHITE METAL LANTERN</td>\n",
       "    </tr>\n",
       "    <tr>\n",
       "      <th>2</th>\n",
       "      <td>536365</td>\n",
       "      <td>CREAM CUPID HEARTS COAT HANGER</td>\n",
       "    </tr>\n",
       "    <tr>\n",
       "      <th>3</th>\n",
       "      <td>536365</td>\n",
       "      <td>KNITTED UNION FLAG HOT WATER BOTTLE</td>\n",
       "    </tr>\n",
       "    <tr>\n",
       "      <th>4</th>\n",
       "      <td>536365</td>\n",
       "      <td>RED WOOLLY HOTTIE WHITE HEART.</td>\n",
       "    </tr>\n",
       "    <tr>\n",
       "      <th>...</th>\n",
       "      <td>...</td>\n",
       "      <td>...</td>\n",
       "    </tr>\n",
       "    <tr>\n",
       "      <th>541904</th>\n",
       "      <td>581587</td>\n",
       "      <td>PACK OF 20 SPACEBOY NAPKINS</td>\n",
       "    </tr>\n",
       "    <tr>\n",
       "      <th>541905</th>\n",
       "      <td>581587</td>\n",
       "      <td>CHILDREN'S APRON DOLLY GIRL</td>\n",
       "    </tr>\n",
       "    <tr>\n",
       "      <th>541906</th>\n",
       "      <td>581587</td>\n",
       "      <td>CHILDRENS CUTLERY DOLLY GIRL</td>\n",
       "    </tr>\n",
       "    <tr>\n",
       "      <th>541907</th>\n",
       "      <td>581587</td>\n",
       "      <td>CHILDRENS CUTLERY CIRCUS PARADE</td>\n",
       "    </tr>\n",
       "    <tr>\n",
       "      <th>541908</th>\n",
       "      <td>581587</td>\n",
       "      <td>BAKING SET 9 PIECE RETROSPOT</td>\n",
       "    </tr>\n",
       "  </tbody>\n",
       "</table>\n",
       "<p>530693 rows Ã— 2 columns</p>\n",
       "</div>"
      ],
      "text/plain": [
       "       InvoiceNo                          Description\n",
       "0         536365   WHITE HANGING HEART T-LIGHT HOLDER\n",
       "1         536365                  WHITE METAL LANTERN\n",
       "2         536365       CREAM CUPID HEARTS COAT HANGER\n",
       "3         536365  KNITTED UNION FLAG HOT WATER BOTTLE\n",
       "4         536365       RED WOOLLY HOTTIE WHITE HEART.\n",
       "...          ...                                  ...\n",
       "541904    581587          PACK OF 20 SPACEBOY NAPKINS\n",
       "541905    581587         CHILDREN'S APRON DOLLY GIRL \n",
       "541906    581587        CHILDRENS CUTLERY DOLLY GIRL \n",
       "541907    581587      CHILDRENS CUTLERY CIRCUS PARADE\n",
       "541908    581587        BAKING SET 9 PIECE RETROSPOT \n",
       "\n",
       "[530693 rows x 2 columns]"
      ]
     },
     "execution_count": 18,
     "metadata": {},
     "output_type": "execute_result"
    }
   ],
   "source": [
    "'''\n",
    "Filter out all transactions having either zero or a negative number of items.\n",
    "Remove all invoice numbers starting with 'C' (using columns 'Is_C_Present').\n",
    "Subset the dataframe down to 'InvoiceNo' and 'Descritpion'.\n",
    "Drop all rows with at least one missing value.\n",
    "'''\n",
    "\n",
    "\n",
    "df_clean = (\n",
    "    df\n",
    "    # filter out non-positive quantity values\n",
    "    .loc[df[\"Quantity\"] > 0]\n",
    "    # remove InvoiceNos starting with C\n",
    "    .loc[df['Is_C_Present'] != 1]\n",
    "    # column filtering\n",
    "    .loc[:, [\"InvoiceNo\", \"Description\"]]\n",
    "    # dropping all rows with at least one missing value\n",
    "    .dropna()\n",
    ")\n",
    "\n",
    "df_clean"
   ]
  },
  {
   "cell_type": "code",
   "execution_count": 19,
   "metadata": {},
   "outputs": [
    {
     "name": "stdout",
     "output_type": "stream",
     "text": [
      "[['HAND WARMER UNION JACK', 'HAND WARMER RED POLKA DOT'], ['ASSORTED COLOUR BIRD ORNAMENT', \"POPPY'S PLAYHOUSE BEDROOM \", \"POPPY'S PLAYHOUSE KITCHEN\", 'FELTCRAFT PRINCESS CHARLOTTE DOLL', 'IVORY KNITTED MUG COSY ', 'BOX OF 6 ASSORTED COLOUR TEASPOONS', 'BOX OF VINTAGE JIGSAW BLOCKS ', 'BOX OF VINTAGE ALPHABET BLOCKS', 'HOME BUILDING BLOCK WORD', 'LOVE BUILDING BLOCK WORD', 'RECIPE BOX WITH METAL HEART', 'DOORMAT NEW ENGLAND']]\n"
     ]
    }
   ],
   "source": [
    "'''\n",
    "Transform the data into a list of lists called invoice_item_list\n",
    "\n",
    "'''\n",
    "\n",
    "invoice_item_list = []\n",
    "\n",
    "for num in list(set(df_clean.InvoiceNo.tolist())):\n",
    "    # filter data set down to one invoice number\n",
    "    tmp_df = df_clean.loc[df_clean['InvoiceNo'] == num]\n",
    "    # extract item descriptions and convert to list\n",
    "    tmp_items = tmp_df.Description.tolist()\n",
    "    # append list invoice_item_list\n",
    "    invoice_item_list.append(tmp_items)\n",
    "\n",
    "print(invoice_item_list[1:3])"
   ]
  },
  {
   "cell_type": "markdown",
   "metadata": {},
   "source": [
    "To be able to run any models the data, currently in the list of lists form, needs to be encoded and recast as a dataframe. \n",
    "\n",
    "Outputted from the encoder is a multidimensional array, where each row is the length of the total number of unique items in the transaction dataset and the elements are Boolean variables, indicating whether that particular item is linked to the invoice number that row presents. \n",
    "\n",
    "With the data encoded, we can recast it as a dataframe where the rows are the invoice numbers and the columns are the unique items in the transaction dataset."
   ]
  },
  {
   "cell_type": "code",
   "execution_count": 20,
   "metadata": {},
   "outputs": [
    {
     "data": {
      "text/html": [
       "<div>\n",
       "<style scoped>\n",
       "    .dataframe tbody tr th:only-of-type {\n",
       "        vertical-align: middle;\n",
       "    }\n",
       "\n",
       "    .dataframe tbody tr th {\n",
       "        vertical-align: top;\n",
       "    }\n",
       "\n",
       "    .dataframe thead th {\n",
       "        text-align: right;\n",
       "    }\n",
       "</style>\n",
       "<table border=\"1\" class=\"dataframe\">\n",
       "  <thead>\n",
       "    <tr style=\"text-align: right;\">\n",
       "      <th></th>\n",
       "      <th>4 PURPLE FLOCK DINNER CANDLES</th>\n",
       "      <th>50'S CHRISTMAS GIFT BAG LARGE</th>\n",
       "      <th>DOLLY GIRL BEAKER</th>\n",
       "      <th>I LOVE LONDON MINI BACKPACK</th>\n",
       "      <th>I LOVE LONDON MINI RUCKSACK</th>\n",
       "      <th>NINE DRAWER OFFICE TIDY</th>\n",
       "      <th>OVAL WALL MIRROR DIAMANTE</th>\n",
       "      <th>RED SPOT GIFT BAG LARGE</th>\n",
       "      <th>SET 2 TEA TOWELS I LOVE LONDON</th>\n",
       "      <th>SPACEBOY BABY GIFT SET</th>\n",
       "      <th>...</th>\n",
       "      <th>returned</th>\n",
       "      <th>taig adjust</th>\n",
       "      <th>test</th>\n",
       "      <th>to push order througha s stock was</th>\n",
       "      <th>website fixed</th>\n",
       "      <th>wrongly coded 20713</th>\n",
       "      <th>wrongly coded 23343</th>\n",
       "      <th>wrongly marked</th>\n",
       "      <th>wrongly marked 23343</th>\n",
       "      <th>wrongly sold (22719) barcode</th>\n",
       "    </tr>\n",
       "  </thead>\n",
       "  <tbody>\n",
       "    <tr>\n",
       "      <th>0</th>\n",
       "      <td>False</td>\n",
       "      <td>False</td>\n",
       "      <td>False</td>\n",
       "      <td>False</td>\n",
       "      <td>False</td>\n",
       "      <td>False</td>\n",
       "      <td>False</td>\n",
       "      <td>False</td>\n",
       "      <td>False</td>\n",
       "      <td>False</td>\n",
       "      <td>...</td>\n",
       "      <td>False</td>\n",
       "      <td>False</td>\n",
       "      <td>False</td>\n",
       "      <td>False</td>\n",
       "      <td>False</td>\n",
       "      <td>False</td>\n",
       "      <td>False</td>\n",
       "      <td>False</td>\n",
       "      <td>False</td>\n",
       "      <td>False</td>\n",
       "    </tr>\n",
       "    <tr>\n",
       "      <th>1</th>\n",
       "      <td>False</td>\n",
       "      <td>False</td>\n",
       "      <td>False</td>\n",
       "      <td>False</td>\n",
       "      <td>False</td>\n",
       "      <td>False</td>\n",
       "      <td>False</td>\n",
       "      <td>False</td>\n",
       "      <td>False</td>\n",
       "      <td>False</td>\n",
       "      <td>...</td>\n",
       "      <td>False</td>\n",
       "      <td>False</td>\n",
       "      <td>False</td>\n",
       "      <td>False</td>\n",
       "      <td>False</td>\n",
       "      <td>False</td>\n",
       "      <td>False</td>\n",
       "      <td>False</td>\n",
       "      <td>False</td>\n",
       "      <td>False</td>\n",
       "    </tr>\n",
       "    <tr>\n",
       "      <th>2</th>\n",
       "      <td>False</td>\n",
       "      <td>False</td>\n",
       "      <td>False</td>\n",
       "      <td>False</td>\n",
       "      <td>False</td>\n",
       "      <td>False</td>\n",
       "      <td>False</td>\n",
       "      <td>False</td>\n",
       "      <td>False</td>\n",
       "      <td>False</td>\n",
       "      <td>...</td>\n",
       "      <td>False</td>\n",
       "      <td>False</td>\n",
       "      <td>False</td>\n",
       "      <td>False</td>\n",
       "      <td>False</td>\n",
       "      <td>False</td>\n",
       "      <td>False</td>\n",
       "      <td>False</td>\n",
       "      <td>False</td>\n",
       "      <td>False</td>\n",
       "    </tr>\n",
       "    <tr>\n",
       "      <th>3</th>\n",
       "      <td>False</td>\n",
       "      <td>False</td>\n",
       "      <td>False</td>\n",
       "      <td>False</td>\n",
       "      <td>False</td>\n",
       "      <td>False</td>\n",
       "      <td>False</td>\n",
       "      <td>False</td>\n",
       "      <td>False</td>\n",
       "      <td>False</td>\n",
       "      <td>...</td>\n",
       "      <td>False</td>\n",
       "      <td>False</td>\n",
       "      <td>False</td>\n",
       "      <td>False</td>\n",
       "      <td>False</td>\n",
       "      <td>False</td>\n",
       "      <td>False</td>\n",
       "      <td>False</td>\n",
       "      <td>False</td>\n",
       "      <td>False</td>\n",
       "    </tr>\n",
       "    <tr>\n",
       "      <th>4</th>\n",
       "      <td>False</td>\n",
       "      <td>False</td>\n",
       "      <td>False</td>\n",
       "      <td>False</td>\n",
       "      <td>False</td>\n",
       "      <td>False</td>\n",
       "      <td>False</td>\n",
       "      <td>False</td>\n",
       "      <td>False</td>\n",
       "      <td>False</td>\n",
       "      <td>...</td>\n",
       "      <td>False</td>\n",
       "      <td>False</td>\n",
       "      <td>False</td>\n",
       "      <td>False</td>\n",
       "      <td>False</td>\n",
       "      <td>False</td>\n",
       "      <td>False</td>\n",
       "      <td>False</td>\n",
       "      <td>False</td>\n",
       "      <td>False</td>\n",
       "    </tr>\n",
       "    <tr>\n",
       "      <th>...</th>\n",
       "      <td>...</td>\n",
       "      <td>...</td>\n",
       "      <td>...</td>\n",
       "      <td>...</td>\n",
       "      <td>...</td>\n",
       "      <td>...</td>\n",
       "      <td>...</td>\n",
       "      <td>...</td>\n",
       "      <td>...</td>\n",
       "      <td>...</td>\n",
       "      <td>...</td>\n",
       "      <td>...</td>\n",
       "      <td>...</td>\n",
       "      <td>...</td>\n",
       "      <td>...</td>\n",
       "      <td>...</td>\n",
       "      <td>...</td>\n",
       "      <td>...</td>\n",
       "      <td>...</td>\n",
       "      <td>...</td>\n",
       "      <td>...</td>\n",
       "    </tr>\n",
       "    <tr>\n",
       "      <th>20131</th>\n",
       "      <td>False</td>\n",
       "      <td>False</td>\n",
       "      <td>False</td>\n",
       "      <td>False</td>\n",
       "      <td>False</td>\n",
       "      <td>False</td>\n",
       "      <td>False</td>\n",
       "      <td>False</td>\n",
       "      <td>False</td>\n",
       "      <td>False</td>\n",
       "      <td>...</td>\n",
       "      <td>False</td>\n",
       "      <td>False</td>\n",
       "      <td>False</td>\n",
       "      <td>False</td>\n",
       "      <td>False</td>\n",
       "      <td>False</td>\n",
       "      <td>False</td>\n",
       "      <td>False</td>\n",
       "      <td>False</td>\n",
       "      <td>False</td>\n",
       "    </tr>\n",
       "    <tr>\n",
       "      <th>20132</th>\n",
       "      <td>False</td>\n",
       "      <td>False</td>\n",
       "      <td>False</td>\n",
       "      <td>False</td>\n",
       "      <td>False</td>\n",
       "      <td>False</td>\n",
       "      <td>False</td>\n",
       "      <td>False</td>\n",
       "      <td>False</td>\n",
       "      <td>False</td>\n",
       "      <td>...</td>\n",
       "      <td>False</td>\n",
       "      <td>False</td>\n",
       "      <td>False</td>\n",
       "      <td>False</td>\n",
       "      <td>False</td>\n",
       "      <td>False</td>\n",
       "      <td>False</td>\n",
       "      <td>False</td>\n",
       "      <td>False</td>\n",
       "      <td>False</td>\n",
       "    </tr>\n",
       "    <tr>\n",
       "      <th>20133</th>\n",
       "      <td>False</td>\n",
       "      <td>False</td>\n",
       "      <td>False</td>\n",
       "      <td>False</td>\n",
       "      <td>False</td>\n",
       "      <td>False</td>\n",
       "      <td>False</td>\n",
       "      <td>False</td>\n",
       "      <td>False</td>\n",
       "      <td>False</td>\n",
       "      <td>...</td>\n",
       "      <td>False</td>\n",
       "      <td>False</td>\n",
       "      <td>False</td>\n",
       "      <td>False</td>\n",
       "      <td>False</td>\n",
       "      <td>False</td>\n",
       "      <td>False</td>\n",
       "      <td>False</td>\n",
       "      <td>False</td>\n",
       "      <td>False</td>\n",
       "    </tr>\n",
       "    <tr>\n",
       "      <th>20134</th>\n",
       "      <td>False</td>\n",
       "      <td>False</td>\n",
       "      <td>False</td>\n",
       "      <td>False</td>\n",
       "      <td>False</td>\n",
       "      <td>False</td>\n",
       "      <td>False</td>\n",
       "      <td>False</td>\n",
       "      <td>False</td>\n",
       "      <td>False</td>\n",
       "      <td>...</td>\n",
       "      <td>False</td>\n",
       "      <td>False</td>\n",
       "      <td>False</td>\n",
       "      <td>False</td>\n",
       "      <td>False</td>\n",
       "      <td>False</td>\n",
       "      <td>False</td>\n",
       "      <td>False</td>\n",
       "      <td>False</td>\n",
       "      <td>False</td>\n",
       "    </tr>\n",
       "    <tr>\n",
       "      <th>20135</th>\n",
       "      <td>False</td>\n",
       "      <td>False</td>\n",
       "      <td>False</td>\n",
       "      <td>False</td>\n",
       "      <td>False</td>\n",
       "      <td>False</td>\n",
       "      <td>False</td>\n",
       "      <td>False</td>\n",
       "      <td>False</td>\n",
       "      <td>False</td>\n",
       "      <td>...</td>\n",
       "      <td>False</td>\n",
       "      <td>False</td>\n",
       "      <td>False</td>\n",
       "      <td>False</td>\n",
       "      <td>False</td>\n",
       "      <td>False</td>\n",
       "      <td>False</td>\n",
       "      <td>False</td>\n",
       "      <td>False</td>\n",
       "      <td>False</td>\n",
       "    </tr>\n",
       "  </tbody>\n",
       "</table>\n",
       "<p>20136 rows Ã— 4077 columns</p>\n",
       "</div>"
      ],
      "text/plain": [
       "        4 PURPLE FLOCK DINNER CANDLES   50'S CHRISTMAS GIFT BAG LARGE  \\\n",
       "0                               False                           False   \n",
       "1                               False                           False   \n",
       "2                               False                           False   \n",
       "3                               False                           False   \n",
       "4                               False                           False   \n",
       "...                               ...                             ...   \n",
       "20131                           False                           False   \n",
       "20132                           False                           False   \n",
       "20133                           False                           False   \n",
       "20134                           False                           False   \n",
       "20135                           False                           False   \n",
       "\n",
       "        DOLLY GIRL BEAKER   I LOVE LONDON MINI BACKPACK  \\\n",
       "0                   False                         False   \n",
       "1                   False                         False   \n",
       "2                   False                         False   \n",
       "3                   False                         False   \n",
       "4                   False                         False   \n",
       "...                   ...                           ...   \n",
       "20131               False                         False   \n",
       "20132               False                         False   \n",
       "20133               False                         False   \n",
       "20134               False                         False   \n",
       "20135               False                         False   \n",
       "\n",
       "        I LOVE LONDON MINI RUCKSACK   NINE DRAWER OFFICE TIDY  \\\n",
       "0                             False                     False   \n",
       "1                             False                     False   \n",
       "2                             False                     False   \n",
       "3                             False                     False   \n",
       "4                             False                     False   \n",
       "...                             ...                       ...   \n",
       "20131                         False                     False   \n",
       "20132                         False                     False   \n",
       "20133                         False                     False   \n",
       "20134                         False                     False   \n",
       "20135                         False                     False   \n",
       "\n",
       "        OVAL WALL MIRROR DIAMANTE    RED SPOT GIFT BAG LARGE  \\\n",
       "0                            False                     False   \n",
       "1                            False                     False   \n",
       "2                            False                     False   \n",
       "3                            False                     False   \n",
       "4                            False                     False   \n",
       "...                            ...                       ...   \n",
       "20131                        False                     False   \n",
       "20132                        False                     False   \n",
       "20133                        False                     False   \n",
       "20134                        False                     False   \n",
       "20135                        False                     False   \n",
       "\n",
       "        SET 2 TEA TOWELS I LOVE LONDON    SPACEBOY BABY GIFT SET  ...  \\\n",
       "0                                 False                    False  ...   \n",
       "1                                 False                    False  ...   \n",
       "2                                 False                    False  ...   \n",
       "3                                 False                    False  ...   \n",
       "4                                 False                    False  ...   \n",
       "...                                 ...                      ...  ...   \n",
       "20131                             False                    False  ...   \n",
       "20132                             False                    False  ...   \n",
       "20133                             False                    False  ...   \n",
       "20134                             False                    False  ...   \n",
       "20135                             False                    False  ...   \n",
       "\n",
       "       returned  taig adjust   test  to push order througha s stock was   \\\n",
       "0         False        False  False                                False   \n",
       "1         False        False  False                                False   \n",
       "2         False        False  False                                False   \n",
       "3         False        False  False                                False   \n",
       "4         False        False  False                                False   \n",
       "...         ...          ...    ...                                  ...   \n",
       "20131     False        False  False                                False   \n",
       "20132     False        False  False                                False   \n",
       "20133     False        False  False                                False   \n",
       "20134     False        False  False                                False   \n",
       "20135     False        False  False                                False   \n",
       "\n",
       "       website fixed  wrongly coded 20713  wrongly coded 23343  \\\n",
       "0              False                False                False   \n",
       "1              False                False                False   \n",
       "2              False                False                False   \n",
       "3              False                False                False   \n",
       "4              False                False                False   \n",
       "...              ...                  ...                  ...   \n",
       "20131          False                False                False   \n",
       "20132          False                False                False   \n",
       "20133          False                False                False   \n",
       "20134          False                False                False   \n",
       "20135          False                False                False   \n",
       "\n",
       "       wrongly marked  wrongly marked 23343  wrongly sold (22719) barcode  \n",
       "0               False                 False                         False  \n",
       "1               False                 False                         False  \n",
       "2               False                 False                         False  \n",
       "3               False                 False                         False  \n",
       "4               False                 False                         False  \n",
       "...               ...                   ...                           ...  \n",
       "20131           False                 False                         False  \n",
       "20132           False                 False                         False  \n",
       "20133           False                 False                         False  \n",
       "20134           False                 False                         False  \n",
       "20135           False                 False                         False  \n",
       "\n",
       "[20136 rows x 4077 columns]"
      ]
     },
     "execution_count": 20,
     "metadata": {},
     "output_type": "execute_result"
    }
   ],
   "source": [
    "# Initialize and fit the transaction encoder\n",
    "online_encoder = mlxtend.preprocessing.TransactionEncoder()\n",
    "online_encoder_array = online_encoder.fit_transform(invoice_item_list)\n",
    "\n",
    "# Recast the encoded array as a dataframe\n",
    "online_encoder_df = pd.DataFrame(online_encoder_array, columns=online_encoder.columns_)\n",
    "\n",
    "# Print the results\n",
    "online_encoder_df"
   ]
  },
  {
   "cell_type": "markdown",
   "metadata": {},
   "source": [
    "# 5.0 Association Rules"
   ]
  },
  {
   "cell_type": "markdown",
   "metadata": {},
   "source": [
    "The Apriori algorithm is one of the most common techniques in Market Basket Analysis to find the association between events\n",
    "\n",
    "It is used to analyze the frequent itemsets in a transactional database, which then is used to generate association rules between the products."
   ]
  },
  {
   "cell_type": "code",
   "execution_count": 21,
   "metadata": {},
   "outputs": [
    {
     "data": {
      "text/html": [
       "<div>\n",
       "<style scoped>\n",
       "    .dataframe tbody tr th:only-of-type {\n",
       "        vertical-align: middle;\n",
       "    }\n",
       "\n",
       "    .dataframe tbody tr th {\n",
       "        vertical-align: top;\n",
       "    }\n",
       "\n",
       "    .dataframe thead th {\n",
       "        text-align: right;\n",
       "    }\n",
       "</style>\n",
       "<table border=\"1\" class=\"dataframe\">\n",
       "  <thead>\n",
       "    <tr style=\"text-align: right;\">\n",
       "      <th></th>\n",
       "      <th>support</th>\n",
       "      <th>itemsets</th>\n",
       "    </tr>\n",
       "  </thead>\n",
       "  <tbody>\n",
       "    <tr>\n",
       "      <th>0</th>\n",
       "      <td>0.013359</td>\n",
       "      <td>(8)</td>\n",
       "    </tr>\n",
       "    <tr>\n",
       "      <th>1</th>\n",
       "      <td>0.015793</td>\n",
       "      <td>(14)</td>\n",
       "    </tr>\n",
       "    <tr>\n",
       "      <th>2</th>\n",
       "      <td>0.012465</td>\n",
       "      <td>(20)</td>\n",
       "    </tr>\n",
       "    <tr>\n",
       "      <th>3</th>\n",
       "      <td>0.017630</td>\n",
       "      <td>(21)</td>\n",
       "    </tr>\n",
       "    <tr>\n",
       "      <th>4</th>\n",
       "      <td>0.017978</td>\n",
       "      <td>(22)</td>\n",
       "    </tr>\n",
       "    <tr>\n",
       "      <th>...</th>\n",
       "      <td>...</td>\n",
       "      <td>...</td>\n",
       "    </tr>\n",
       "    <tr>\n",
       "      <th>1849</th>\n",
       "      <td>0.011025</td>\n",
       "      <td>(1840, 1827, 1837, 1838)</td>\n",
       "    </tr>\n",
       "    <tr>\n",
       "      <th>1850</th>\n",
       "      <td>0.011174</td>\n",
       "      <td>(2010, 2015, 2014, 2007)</td>\n",
       "    </tr>\n",
       "    <tr>\n",
       "      <th>1851</th>\n",
       "      <td>0.010280</td>\n",
       "      <td>(2010, 2015, 2020, 2007)</td>\n",
       "    </tr>\n",
       "    <tr>\n",
       "      <th>1852</th>\n",
       "      <td>0.010181</td>\n",
       "      <td>(2015, 2020, 2014, 2007)</td>\n",
       "    </tr>\n",
       "    <tr>\n",
       "      <th>1853</th>\n",
       "      <td>0.010131</td>\n",
       "      <td>(3937, 706, 707, 2823, 3509)</td>\n",
       "    </tr>\n",
       "  </tbody>\n",
       "</table>\n",
       "<p>1854 rows Ã— 2 columns</p>\n",
       "</div>"
      ],
      "text/plain": [
       "       support                      itemsets\n",
       "0     0.013359                           (8)\n",
       "1     0.015793                          (14)\n",
       "2     0.012465                          (20)\n",
       "3     0.017630                          (21)\n",
       "4     0.017978                          (22)\n",
       "...        ...                           ...\n",
       "1849  0.011025      (1840, 1827, 1837, 1838)\n",
       "1850  0.011174      (2010, 2015, 2014, 2007)\n",
       "1851  0.010280      (2010, 2015, 2020, 2007)\n",
       "1852  0.010181      (2015, 2020, 2014, 2007)\n",
       "1853  0.010131  (3937, 706, 707, 2823, 3509)\n",
       "\n",
       "[1854 rows x 2 columns]"
      ]
     },
     "execution_count": 21,
     "metadata": {},
     "output_type": "execute_result"
    }
   ],
   "source": [
    "'''\n",
    "Run the Apriori Algorithm with min_support = 0.01 (by default 0.5)\n",
    "'''\n",
    "\n",
    "apriori_model = mlxtend.frequent_patterns.apriori(online_encoder_df, min_support=0.01)\n",
    "apriori_model"
   ]
  },
  {
   "cell_type": "code",
   "execution_count": 22,
   "metadata": {},
   "outputs": [
    {
     "data": {
      "text/html": [
       "<div>\n",
       "<style scoped>\n",
       "    .dataframe tbody tr th:only-of-type {\n",
       "        vertical-align: middle;\n",
       "    }\n",
       "\n",
       "    .dataframe tbody tr th {\n",
       "        vertical-align: top;\n",
       "    }\n",
       "\n",
       "    .dataframe thead th {\n",
       "        text-align: right;\n",
       "    }\n",
       "</style>\n",
       "<table border=\"1\" class=\"dataframe\">\n",
       "  <thead>\n",
       "    <tr style=\"text-align: right;\">\n",
       "      <th></th>\n",
       "      <th>support</th>\n",
       "      <th>itemsets</th>\n",
       "    </tr>\n",
       "  </thead>\n",
       "  <tbody>\n",
       "    <tr>\n",
       "      <th>0</th>\n",
       "      <td>0.013359</td>\n",
       "      <td>( SET 2 TEA TOWELS I LOVE LONDON )</td>\n",
       "    </tr>\n",
       "    <tr>\n",
       "      <th>1</th>\n",
       "      <td>0.015793</td>\n",
       "      <td>(10 COLOUR SPACEBOY PEN)</td>\n",
       "    </tr>\n",
       "    <tr>\n",
       "      <th>2</th>\n",
       "      <td>0.012465</td>\n",
       "      <td>(12 MESSAGE CARDS WITH ENVELOPES)</td>\n",
       "    </tr>\n",
       "    <tr>\n",
       "      <th>3</th>\n",
       "      <td>0.017630</td>\n",
       "      <td>(12 PENCIL SMALL TUBE WOODLAND)</td>\n",
       "    </tr>\n",
       "    <tr>\n",
       "      <th>4</th>\n",
       "      <td>0.017978</td>\n",
       "      <td>(12 PENCILS SMALL TUBE RED RETROSPOT)</td>\n",
       "    </tr>\n",
       "    <tr>\n",
       "      <th>...</th>\n",
       "      <td>...</td>\n",
       "      <td>...</td>\n",
       "    </tr>\n",
       "    <tr>\n",
       "      <th>1849</th>\n",
       "      <td>0.011025</td>\n",
       "      <td>(JUMBO BAG RED RETROSPOT, JUMBO SHOPPER VINTAG...</td>\n",
       "    </tr>\n",
       "    <tr>\n",
       "      <th>1850</th>\n",
       "      <td>0.011174</td>\n",
       "      <td>(LUNCH BAG RED RETROSPOT, LUNCH BAG  BLACK SKU...</td>\n",
       "    </tr>\n",
       "    <tr>\n",
       "      <th>1851</th>\n",
       "      <td>0.010280</td>\n",
       "      <td>(LUNCH BAG RED RETROSPOT, LUNCH BAG  BLACK SKU...</td>\n",
       "    </tr>\n",
       "    <tr>\n",
       "      <th>1852</th>\n",
       "      <td>0.010181</td>\n",
       "      <td>(LUNCH BAG RED RETROSPOT, LUNCH BAG PINK POLKA...</td>\n",
       "    </tr>\n",
       "    <tr>\n",
       "      <th>1853</th>\n",
       "      <td>0.010131</td>\n",
       "      <td>(CHARLOTTE BAG PINK POLKADOT, STRAWBERRY CHARL...</td>\n",
       "    </tr>\n",
       "  </tbody>\n",
       "</table>\n",
       "<p>1854 rows Ã— 2 columns</p>\n",
       "</div>"
      ],
      "text/plain": [
       "       support                                           itemsets\n",
       "0     0.013359                 ( SET 2 TEA TOWELS I LOVE LONDON )\n",
       "1     0.015793                           (10 COLOUR SPACEBOY PEN)\n",
       "2     0.012465                  (12 MESSAGE CARDS WITH ENVELOPES)\n",
       "3     0.017630                    (12 PENCIL SMALL TUBE WOODLAND)\n",
       "4     0.017978              (12 PENCILS SMALL TUBE RED RETROSPOT)\n",
       "...        ...                                                ...\n",
       "1849  0.011025  (JUMBO BAG RED RETROSPOT, JUMBO SHOPPER VINTAG...\n",
       "1850  0.011174  (LUNCH BAG RED RETROSPOT, LUNCH BAG  BLACK SKU...\n",
       "1851  0.010280  (LUNCH BAG RED RETROSPOT, LUNCH BAG  BLACK SKU...\n",
       "1852  0.010181  (LUNCH BAG RED RETROSPOT, LUNCH BAG PINK POLKA...\n",
       "1853  0.010131  (CHARLOTTE BAG PINK POLKADOT, STRAWBERRY CHARL...\n",
       "\n",
       "[1854 rows x 2 columns]"
      ]
     },
     "execution_count": 22,
     "metadata": {},
     "output_type": "execute_result"
    }
   ],
   "source": [
    "'''\n",
    "Run the same model again, but this time with use_colnames=True.\n",
    "This will replace the numerical designations with the actual item names.\n",
    "'''\n",
    "\n",
    "apriori_model_colnames = mlxtend.frequent_patterns.apriori(\n",
    "    online_encoder_df, \n",
    "    min_support=0.01,\n",
    "    use_colnames=True\n",
    ")\n",
    "\n",
    "apriori_model_colnames"
   ]
  },
  {
   "cell_type": "code",
   "execution_count": 23,
   "metadata": {},
   "outputs": [
    {
     "data": {
      "text/html": [
       "<div>\n",
       "<style scoped>\n",
       "    .dataframe tbody tr th:only-of-type {\n",
       "        vertical-align: middle;\n",
       "    }\n",
       "\n",
       "    .dataframe tbody tr th {\n",
       "        vertical-align: top;\n",
       "    }\n",
       "\n",
       "    .dataframe thead th {\n",
       "        text-align: right;\n",
       "    }\n",
       "</style>\n",
       "<table border=\"1\" class=\"dataframe\">\n",
       "  <thead>\n",
       "    <tr style=\"text-align: right;\">\n",
       "      <th></th>\n",
       "      <th>support</th>\n",
       "      <th>itemsets</th>\n",
       "      <th>length</th>\n",
       "    </tr>\n",
       "  </thead>\n",
       "  <tbody>\n",
       "    <tr>\n",
       "      <th>0</th>\n",
       "      <td>0.013359</td>\n",
       "      <td>( SET 2 TEA TOWELS I LOVE LONDON )</td>\n",
       "      <td>1</td>\n",
       "    </tr>\n",
       "    <tr>\n",
       "      <th>1</th>\n",
       "      <td>0.015793</td>\n",
       "      <td>(10 COLOUR SPACEBOY PEN)</td>\n",
       "      <td>1</td>\n",
       "    </tr>\n",
       "    <tr>\n",
       "      <th>2</th>\n",
       "      <td>0.012465</td>\n",
       "      <td>(12 MESSAGE CARDS WITH ENVELOPES)</td>\n",
       "      <td>1</td>\n",
       "    </tr>\n",
       "    <tr>\n",
       "      <th>3</th>\n",
       "      <td>0.017630</td>\n",
       "      <td>(12 PENCIL SMALL TUBE WOODLAND)</td>\n",
       "      <td>1</td>\n",
       "    </tr>\n",
       "    <tr>\n",
       "      <th>4</th>\n",
       "      <td>0.017978</td>\n",
       "      <td>(12 PENCILS SMALL TUBE RED RETROSPOT)</td>\n",
       "      <td>1</td>\n",
       "    </tr>\n",
       "    <tr>\n",
       "      <th>...</th>\n",
       "      <td>...</td>\n",
       "      <td>...</td>\n",
       "      <td>...</td>\n",
       "    </tr>\n",
       "    <tr>\n",
       "      <th>1849</th>\n",
       "      <td>0.011025</td>\n",
       "      <td>(JUMBO BAG RED RETROSPOT, JUMBO SHOPPER VINTAG...</td>\n",
       "      <td>4</td>\n",
       "    </tr>\n",
       "    <tr>\n",
       "      <th>1850</th>\n",
       "      <td>0.011174</td>\n",
       "      <td>(LUNCH BAG RED RETROSPOT, LUNCH BAG  BLACK SKU...</td>\n",
       "      <td>4</td>\n",
       "    </tr>\n",
       "    <tr>\n",
       "      <th>1851</th>\n",
       "      <td>0.010280</td>\n",
       "      <td>(LUNCH BAG RED RETROSPOT, LUNCH BAG  BLACK SKU...</td>\n",
       "      <td>4</td>\n",
       "    </tr>\n",
       "    <tr>\n",
       "      <th>1852</th>\n",
       "      <td>0.010181</td>\n",
       "      <td>(LUNCH BAG RED RETROSPOT, LUNCH BAG PINK POLKA...</td>\n",
       "      <td>4</td>\n",
       "    </tr>\n",
       "    <tr>\n",
       "      <th>1853</th>\n",
       "      <td>0.010131</td>\n",
       "      <td>(CHARLOTTE BAG PINK POLKADOT, STRAWBERRY CHARL...</td>\n",
       "      <td>5</td>\n",
       "    </tr>\n",
       "  </tbody>\n",
       "</table>\n",
       "<p>1854 rows Ã— 3 columns</p>\n",
       "</div>"
      ],
      "text/plain": [
       "       support                                           itemsets  length\n",
       "0     0.013359                 ( SET 2 TEA TOWELS I LOVE LONDON )       1\n",
       "1     0.015793                           (10 COLOUR SPACEBOY PEN)       1\n",
       "2     0.012465                  (12 MESSAGE CARDS WITH ENVELOPES)       1\n",
       "3     0.017630                    (12 PENCIL SMALL TUBE WOODLAND)       1\n",
       "4     0.017978              (12 PENCILS SMALL TUBE RED RETROSPOT)       1\n",
       "...        ...                                                ...     ...\n",
       "1849  0.011025  (JUMBO BAG RED RETROSPOT, JUMBO SHOPPER VINTAG...       4\n",
       "1850  0.011174  (LUNCH BAG RED RETROSPOT, LUNCH BAG  BLACK SKU...       4\n",
       "1851  0.010280  (LUNCH BAG RED RETROSPOT, LUNCH BAG  BLACK SKU...       4\n",
       "1852  0.010181  (LUNCH BAG RED RETROSPOT, LUNCH BAG PINK POLKA...       4\n",
       "1853  0.010131  (CHARLOTTE BAG PINK POLKADOT, STRAWBERRY CHARL...       5\n",
       "\n",
       "[1854 rows x 3 columns]"
      ]
     },
     "execution_count": 23,
     "metadata": {},
     "output_type": "execute_result"
    }
   ],
   "source": [
    "'''\n",
    "Add an additional column to the output of apriori_model_colnames that contains the size of the item set.\n",
    "This will help with filtering and further analysis. \n",
    "'''\n",
    "\n",
    "apriori_model_colnames['length'] = (\n",
    "    apriori_model_colnames['itemsets'].apply(lambda x: len(x))\n",
    ")\n",
    "\n",
    "apriori_model_colnames"
   ]
  },
  {
   "cell_type": "markdown",
   "metadata": {},
   "source": [
    "#### Examine one case"
   ]
  },
  {
   "cell_type": "code",
   "execution_count": 24,
   "metadata": {},
   "outputs": [
    {
     "data": {
      "text/html": [
       "<div>\n",
       "<style scoped>\n",
       "    .dataframe tbody tr th:only-of-type {\n",
       "        vertical-align: middle;\n",
       "    }\n",
       "\n",
       "    .dataframe tbody tr th {\n",
       "        vertical-align: top;\n",
       "    }\n",
       "\n",
       "    .dataframe thead th {\n",
       "        text-align: right;\n",
       "    }\n",
       "</style>\n",
       "<table border=\"1\" class=\"dataframe\">\n",
       "  <thead>\n",
       "    <tr style=\"text-align: right;\">\n",
       "      <th></th>\n",
       "      <th>support</th>\n",
       "      <th>itemsets</th>\n",
       "      <th>length</th>\n",
       "    </tr>\n",
       "  </thead>\n",
       "  <tbody>\n",
       "    <tr>\n",
       "      <th>3</th>\n",
       "      <td>0.01763</td>\n",
       "      <td>(12 PENCIL SMALL TUBE WOODLAND)</td>\n",
       "      <td>1</td>\n",
       "    </tr>\n",
       "  </tbody>\n",
       "</table>\n",
       "</div>"
      ],
      "text/plain": [
       "   support                         itemsets  length\n",
       "3  0.01763  (12 PENCIL SMALL TUBE WOODLAND)       1"
      ]
     },
     "execution_count": 24,
     "metadata": {},
     "output_type": "execute_result"
    }
   ],
   "source": [
    "apriori_model_colnames[\n",
    "    apriori_model_colnames['itemsets'] == frozenset(\n",
    "        {'12 PENCIL SMALL TUBE WOODLAND'})]"
   ]
  },
  {
   "cell_type": "markdown",
   "metadata": {},
   "source": [
    "The output gives us the support value for â€˜12 PENCIL SMALL TUBE WOODLANDâ€™. The support value says that this specific item appears in 1,76% of the transactions."
   ]
  },
  {
   "cell_type": "code",
   "execution_count": 25,
   "metadata": {},
   "outputs": [
    {
     "data": {
      "text/html": [
       "<div>\n",
       "<style scoped>\n",
       "    .dataframe tbody tr th:only-of-type {\n",
       "        vertical-align: middle;\n",
       "    }\n",
       "\n",
       "    .dataframe tbody tr th {\n",
       "        vertical-align: top;\n",
       "    }\n",
       "\n",
       "    .dataframe thead th {\n",
       "        text-align: right;\n",
       "    }\n",
       "</style>\n",
       "<table border=\"1\" class=\"dataframe\">\n",
       "  <thead>\n",
       "    <tr style=\"text-align: right;\">\n",
       "      <th></th>\n",
       "      <th>support</th>\n",
       "      <th>itemsets</th>\n",
       "      <th>length</th>\n",
       "    </tr>\n",
       "  </thead>\n",
       "  <tbody>\n",
       "    <tr>\n",
       "      <th>836</th>\n",
       "      <td>0.020759</td>\n",
       "      <td>(ALARM CLOCK BAKELIKE PINK, ALARM CLOCK BAKELI...</td>\n",
       "      <td>2</td>\n",
       "    </tr>\n",
       "    <tr>\n",
       "      <th>887</th>\n",
       "      <td>0.020362</td>\n",
       "      <td>(CHARLOTTE BAG SUKI DESIGN, CHARLOTTE BAG PINK...</td>\n",
       "      <td>2</td>\n",
       "    </tr>\n",
       "    <tr>\n",
       "      <th>923</th>\n",
       "      <td>0.020610</td>\n",
       "      <td>(STRAWBERRY CHARLOTTE BAG, CHARLOTTE BAG SUKI ...</td>\n",
       "      <td>2</td>\n",
       "    </tr>\n",
       "    <tr>\n",
       "      <th>1105</th>\n",
       "      <td>0.020560</td>\n",
       "      <td>(JUMBO  BAG BAROQUE BLACK WHITE, JUMBO BAG PIN...</td>\n",
       "      <td>2</td>\n",
       "    </tr>\n",
       "    <tr>\n",
       "      <th>1114</th>\n",
       "      <td>0.020908</td>\n",
       "      <td>(JUMBO SHOPPER VINTAGE RED PAISLEY, JUMBO  BAG...</td>\n",
       "      <td>2</td>\n",
       "    </tr>\n",
       "    <tr>\n",
       "      <th>1116</th>\n",
       "      <td>0.020957</td>\n",
       "      <td>(JUMBO  BAG BAROQUE BLACK WHITE, JUMBO STORAGE...</td>\n",
       "      <td>2</td>\n",
       "    </tr>\n",
       "    <tr>\n",
       "      <th>1129</th>\n",
       "      <td>0.020560</td>\n",
       "      <td>(JUMBO BAG RED RETROSPOT, JUMBO BAG ALPHABET)</td>\n",
       "      <td>2</td>\n",
       "    </tr>\n",
       "    <tr>\n",
       "      <th>1137</th>\n",
       "      <td>0.020163</td>\n",
       "      <td>(JUMBO BAG APPLES, JUMBO BAG PEARS)</td>\n",
       "      <td>2</td>\n",
       "    </tr>\n",
       "    <tr>\n",
       "      <th>1203</th>\n",
       "      <td>0.020709</td>\n",
       "      <td>(JUMBO SHOPPER VINTAGE RED PAISLEY, JUMBO BAG ...</td>\n",
       "      <td>2</td>\n",
       "    </tr>\n",
       "    <tr>\n",
       "      <th>1218</th>\n",
       "      <td>0.020560</td>\n",
       "      <td>(JUMBO BAG RED RETROSPOT, JUMBO STORAGE BAG SK...</td>\n",
       "      <td>2</td>\n",
       "    </tr>\n",
       "    <tr>\n",
       "      <th>1236</th>\n",
       "      <td>0.020610</td>\n",
       "      <td>(JUMBO BAG RED RETROSPOT, RECYCLING BAG RETROS...</td>\n",
       "      <td>2</td>\n",
       "    </tr>\n",
       "    <tr>\n",
       "      <th>1328</th>\n",
       "      <td>0.020610</td>\n",
       "      <td>(LUNCH BAG APPLE DESIGN, LUNCH BAG  BLACK SKULL.)</td>\n",
       "      <td>2</td>\n",
       "    </tr>\n",
       "    <tr>\n",
       "      <th>1390</th>\n",
       "      <td>0.020610</td>\n",
       "      <td>(LUNCH BAG PINK POLKADOT, LUNCH BAG SUKI DESIGN )</td>\n",
       "      <td>2</td>\n",
       "    </tr>\n",
       "    <tr>\n",
       "      <th>1458</th>\n",
       "      <td>0.020610</td>\n",
       "      <td>(WHITE HANGING HEART T-LIGHT HOLDER, NATURAL S...</td>\n",
       "      <td>2</td>\n",
       "    </tr>\n",
       "    <tr>\n",
       "      <th>1581</th>\n",
       "      <td>0.020362</td>\n",
       "      <td>(SET OF 6 SPICE TINS PANTRY DESIGN, SET OF 3 C...</td>\n",
       "      <td>2</td>\n",
       "    </tr>\n",
       "    <tr>\n",
       "      <th>1607</th>\n",
       "      <td>0.020163</td>\n",
       "      <td>(STRAWBERRY CHARLOTTE BAG, WOODLAND CHARLOTTE ...</td>\n",
       "      <td>2</td>\n",
       "    </tr>\n",
       "    <tr>\n",
       "      <th>1615</th>\n",
       "      <td>0.020262</td>\n",
       "      <td>(WHITE HANGING HEART T-LIGHT HOLDER, WOODEN PI...</td>\n",
       "      <td>2</td>\n",
       "    </tr>\n",
       "  </tbody>\n",
       "</table>\n",
       "</div>"
      ],
      "text/plain": [
       "       support                                           itemsets  length\n",
       "836   0.020759  (ALARM CLOCK BAKELIKE PINK, ALARM CLOCK BAKELI...       2\n",
       "887   0.020362  (CHARLOTTE BAG SUKI DESIGN, CHARLOTTE BAG PINK...       2\n",
       "923   0.020610  (STRAWBERRY CHARLOTTE BAG, CHARLOTTE BAG SUKI ...       2\n",
       "1105  0.020560  (JUMBO  BAG BAROQUE BLACK WHITE, JUMBO BAG PIN...       2\n",
       "1114  0.020908  (JUMBO SHOPPER VINTAGE RED PAISLEY, JUMBO  BAG...       2\n",
       "1116  0.020957  (JUMBO  BAG BAROQUE BLACK WHITE, JUMBO STORAGE...       2\n",
       "1129  0.020560      (JUMBO BAG RED RETROSPOT, JUMBO BAG ALPHABET)       2\n",
       "1137  0.020163                (JUMBO BAG APPLES, JUMBO BAG PEARS)       2\n",
       "1203  0.020709  (JUMBO SHOPPER VINTAGE RED PAISLEY, JUMBO BAG ...       2\n",
       "1218  0.020560  (JUMBO BAG RED RETROSPOT, JUMBO STORAGE BAG SK...       2\n",
       "1236  0.020610  (JUMBO BAG RED RETROSPOT, RECYCLING BAG RETROS...       2\n",
       "1328  0.020610  (LUNCH BAG APPLE DESIGN, LUNCH BAG  BLACK SKULL.)       2\n",
       "1390  0.020610  (LUNCH BAG PINK POLKADOT, LUNCH BAG SUKI DESIGN )       2\n",
       "1458  0.020610  (WHITE HANGING HEART T-LIGHT HOLDER, NATURAL S...       2\n",
       "1581  0.020362  (SET OF 6 SPICE TINS PANTRY DESIGN, SET OF 3 C...       2\n",
       "1607  0.020163  (STRAWBERRY CHARLOTTE BAG, WOODLAND CHARLOTTE ...       2\n",
       "1615  0.020262  (WHITE HANGING HEART T-LIGHT HOLDER, WOODEN PI...       2"
      ]
     },
     "execution_count": 25,
     "metadata": {},
     "output_type": "execute_result"
    }
   ],
   "source": [
    "apriori_model_colnames[\n",
    "    (apriori_model_colnames['length'] == 2) & \n",
    "    (apriori_model_colnames['support'] >= 0.02) &\n",
    "    (apriori_model_colnames['support'] < 0.021)\n",
    "]"
   ]
  },
  {
   "cell_type": "markdown",
   "metadata": {},
   "source": [
    "### This dataframe contains all the item sets (pairs of items bought together) whose support value is in the range between 2% and 2.1% of transactions.\n",
    "\n",
    "### When you are filtering on support, it is important to specify a range instead of a sprecific value since it is quite possible to pick a value for which there are no item sets."
   ]
  },
  {
   "cell_type": "code",
   "execution_count": 26,
   "metadata": {},
   "outputs": [
    {
     "data": {
      "text/plain": [
       "Text(0.5, 1.0, 'Support')"
      ]
     },
     "execution_count": 26,
     "metadata": {},
     "output_type": "execute_result"
    },
    {
     "data": {
      "image/png": "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\n",
      "text/plain": [
       "<Figure size 432x288 with 1 Axes>"
      ]
     },
     "metadata": {
      "needs_background": "light"
     },
     "output_type": "display_data"
    }
   ],
   "source": [
    "apriori_model_colnames.hist(\"support\", grid=False, bins=30)\n",
    "plt.title(\"Support\")"
   ]
  },
  {
   "cell_type": "markdown",
   "metadata": {},
   "source": [
    "# 4.0 Deriving Association Rules"
   ]
  },
  {
   "cell_type": "code",
   "execution_count": 27,
   "metadata": {},
   "outputs": [
    {
     "data": {
      "text/html": [
       "<div>\n",
       "<style scoped>\n",
       "    .dataframe tbody tr th:only-of-type {\n",
       "        vertical-align: middle;\n",
       "    }\n",
       "\n",
       "    .dataframe tbody tr th {\n",
       "        vertical-align: top;\n",
       "    }\n",
       "\n",
       "    .dataframe thead th {\n",
       "        text-align: right;\n",
       "    }\n",
       "</style>\n",
       "<table border=\"1\" class=\"dataframe\">\n",
       "  <thead>\n",
       "    <tr style=\"text-align: right;\">\n",
       "      <th></th>\n",
       "      <th>antecedents</th>\n",
       "      <th>consequents</th>\n",
       "      <th>antecedent support</th>\n",
       "      <th>consequent support</th>\n",
       "      <th>support</th>\n",
       "      <th>confidence</th>\n",
       "      <th>lift</th>\n",
       "      <th>leverage</th>\n",
       "      <th>conviction</th>\n",
       "    </tr>\n",
       "  </thead>\n",
       "  <tbody>\n",
       "    <tr>\n",
       "      <th>0</th>\n",
       "      <td>(ALARM CLOCK BAKELIKE CHOCOLATE)</td>\n",
       "      <td>(ALARM CLOCK BAKELIKE GREEN)</td>\n",
       "      <td>0.021255</td>\n",
       "      <td>0.048669</td>\n",
       "      <td>0.013756</td>\n",
       "      <td>0.647196</td>\n",
       "      <td>13.297902</td>\n",
       "      <td>0.012722</td>\n",
       "      <td>2.696488</td>\n",
       "    </tr>\n",
       "    <tr>\n",
       "      <th>1</th>\n",
       "      <td>(ALARM CLOCK BAKELIKE CHOCOLATE)</td>\n",
       "      <td>(ALARM CLOCK BAKELIKE RED )</td>\n",
       "      <td>0.021255</td>\n",
       "      <td>0.052195</td>\n",
       "      <td>0.014501</td>\n",
       "      <td>0.682243</td>\n",
       "      <td>13.071023</td>\n",
       "      <td>0.013392</td>\n",
       "      <td>2.982798</td>\n",
       "    </tr>\n",
       "    <tr>\n",
       "      <th>2</th>\n",
       "      <td>(ALARM CLOCK BAKELIKE ORANGE)</td>\n",
       "      <td>(ALARM CLOCK BAKELIKE GREEN)</td>\n",
       "      <td>0.022100</td>\n",
       "      <td>0.048669</td>\n",
       "      <td>0.013558</td>\n",
       "      <td>0.613483</td>\n",
       "      <td>12.605201</td>\n",
       "      <td>0.012482</td>\n",
       "      <td>2.461292</td>\n",
       "    </tr>\n",
       "    <tr>\n",
       "      <th>3</th>\n",
       "      <td>(ALARM CLOCK BAKELIKE GREEN)</td>\n",
       "      <td>(ALARM CLOCK BAKELIKE RED )</td>\n",
       "      <td>0.048669</td>\n",
       "      <td>0.052195</td>\n",
       "      <td>0.031784</td>\n",
       "      <td>0.653061</td>\n",
       "      <td>12.511932</td>\n",
       "      <td>0.029244</td>\n",
       "      <td>2.731908</td>\n",
       "    </tr>\n",
       "    <tr>\n",
       "      <th>4</th>\n",
       "      <td>(ALARM CLOCK BAKELIKE RED )</td>\n",
       "      <td>(ALARM CLOCK BAKELIKE GREEN)</td>\n",
       "      <td>0.052195</td>\n",
       "      <td>0.048669</td>\n",
       "      <td>0.031784</td>\n",
       "      <td>0.608944</td>\n",
       "      <td>12.511932</td>\n",
       "      <td>0.029244</td>\n",
       "      <td>2.432722</td>\n",
       "    </tr>\n",
       "    <tr>\n",
       "      <th>...</th>\n",
       "      <td>...</td>\n",
       "      <td>...</td>\n",
       "      <td>...</td>\n",
       "      <td>...</td>\n",
       "      <td>...</td>\n",
       "      <td>...</td>\n",
       "      <td>...</td>\n",
       "      <td>...</td>\n",
       "      <td>...</td>\n",
       "    </tr>\n",
       "    <tr>\n",
       "      <th>493</th>\n",
       "      <td>(CHARLOTTE BAG SUKI DESIGN, RED RETROSPOT CHAR...</td>\n",
       "      <td>(STRAWBERRY CHARLOTTE BAG, WOODLAND CHARLOTTE ...</td>\n",
       "      <td>0.016339</td>\n",
       "      <td>0.020163</td>\n",
       "      <td>0.010131</td>\n",
       "      <td>0.620061</td>\n",
       "      <td>30.752572</td>\n",
       "      <td>0.009802</td>\n",
       "      <td>2.578931</td>\n",
       "    </tr>\n",
       "    <tr>\n",
       "      <th>494</th>\n",
       "      <td>(STRAWBERRY CHARLOTTE BAG, CHARLOTTE BAG SUKI ...</td>\n",
       "      <td>(RED RETROSPOT CHARLOTTE BAG, CHARLOTTE BAG PI...</td>\n",
       "      <td>0.015048</td>\n",
       "      <td>0.025924</td>\n",
       "      <td>0.010131</td>\n",
       "      <td>0.673267</td>\n",
       "      <td>25.971094</td>\n",
       "      <td>0.009741</td>\n",
       "      <td>2.981264</td>\n",
       "    </tr>\n",
       "    <tr>\n",
       "      <th>495</th>\n",
       "      <td>(STRAWBERRY CHARLOTTE BAG, RED RETROSPOT CHARL...</td>\n",
       "      <td>(CHARLOTTE BAG SUKI DESIGN, CHARLOTTE BAG PINK...</td>\n",
       "      <td>0.016240</td>\n",
       "      <td>0.020362</td>\n",
       "      <td>0.010131</td>\n",
       "      <td>0.623853</td>\n",
       "      <td>30.638801</td>\n",
       "      <td>0.009800</td>\n",
       "      <td>2.604405</td>\n",
       "    </tr>\n",
       "    <tr>\n",
       "      <th>496</th>\n",
       "      <td>(STRAWBERRY CHARLOTTE BAG, CHARLOTTE BAG SUKI ...</td>\n",
       "      <td>(WOODLAND CHARLOTTE BAG, CHARLOTTE BAG PINK PO...</td>\n",
       "      <td>0.016587</td>\n",
       "      <td>0.019617</td>\n",
       "      <td>0.010131</td>\n",
       "      <td>0.610778</td>\n",
       "      <td>31.135784</td>\n",
       "      <td>0.009806</td>\n",
       "      <td>2.518831</td>\n",
       "    </tr>\n",
       "    <tr>\n",
       "      <th>497</th>\n",
       "      <td>(CHARLOTTE BAG SUKI DESIGN, RED RETROSPOT CHAR...</td>\n",
       "      <td>(STRAWBERRY CHARLOTTE BAG, CHARLOTTE BAG PINK ...</td>\n",
       "      <td>0.016687</td>\n",
       "      <td>0.018822</td>\n",
       "      <td>0.010131</td>\n",
       "      <td>0.607143</td>\n",
       "      <td>32.257067</td>\n",
       "      <td>0.009817</td>\n",
       "      <td>2.497544</td>\n",
       "    </tr>\n",
       "  </tbody>\n",
       "</table>\n",
       "<p>498 rows Ã— 9 columns</p>\n",
       "</div>"
      ],
      "text/plain": [
       "                                           antecedents  \\\n",
       "0                     (ALARM CLOCK BAKELIKE CHOCOLATE)   \n",
       "1                     (ALARM CLOCK BAKELIKE CHOCOLATE)   \n",
       "2                        (ALARM CLOCK BAKELIKE ORANGE)   \n",
       "3                         (ALARM CLOCK BAKELIKE GREEN)   \n",
       "4                          (ALARM CLOCK BAKELIKE RED )   \n",
       "..                                                 ...   \n",
       "493  (CHARLOTTE BAG SUKI DESIGN, RED RETROSPOT CHAR...   \n",
       "494  (STRAWBERRY CHARLOTTE BAG, CHARLOTTE BAG SUKI ...   \n",
       "495  (STRAWBERRY CHARLOTTE BAG, RED RETROSPOT CHARL...   \n",
       "496  (STRAWBERRY CHARLOTTE BAG, CHARLOTTE BAG SUKI ...   \n",
       "497  (CHARLOTTE BAG SUKI DESIGN, RED RETROSPOT CHAR...   \n",
       "\n",
       "                                           consequents  antecedent support  \\\n",
       "0                         (ALARM CLOCK BAKELIKE GREEN)            0.021255   \n",
       "1                          (ALARM CLOCK BAKELIKE RED )            0.021255   \n",
       "2                         (ALARM CLOCK BAKELIKE GREEN)            0.022100   \n",
       "3                          (ALARM CLOCK BAKELIKE RED )            0.048669   \n",
       "4                         (ALARM CLOCK BAKELIKE GREEN)            0.052195   \n",
       "..                                                 ...                 ...   \n",
       "493  (STRAWBERRY CHARLOTTE BAG, WOODLAND CHARLOTTE ...            0.016339   \n",
       "494  (RED RETROSPOT CHARLOTTE BAG, CHARLOTTE BAG PI...            0.015048   \n",
       "495  (CHARLOTTE BAG SUKI DESIGN, CHARLOTTE BAG PINK...            0.016240   \n",
       "496  (WOODLAND CHARLOTTE BAG, CHARLOTTE BAG PINK PO...            0.016587   \n",
       "497  (STRAWBERRY CHARLOTTE BAG, CHARLOTTE BAG PINK ...            0.016687   \n",
       "\n",
       "     consequent support   support  confidence       lift  leverage  conviction  \n",
       "0              0.048669  0.013756    0.647196  13.297902  0.012722    2.696488  \n",
       "1              0.052195  0.014501    0.682243  13.071023  0.013392    2.982798  \n",
       "2              0.048669  0.013558    0.613483  12.605201  0.012482    2.461292  \n",
       "3              0.052195  0.031784    0.653061  12.511932  0.029244    2.731908  \n",
       "4              0.048669  0.031784    0.608944  12.511932  0.029244    2.432722  \n",
       "..                  ...       ...         ...        ...       ...         ...  \n",
       "493            0.020163  0.010131    0.620061  30.752572  0.009802    2.578931  \n",
       "494            0.025924  0.010131    0.673267  25.971094  0.009741    2.981264  \n",
       "495            0.020362  0.010131    0.623853  30.638801  0.009800    2.604405  \n",
       "496            0.019617  0.010131    0.610778  31.135784  0.009806    2.518831  \n",
       "497            0.018822  0.010131    0.607143  32.257067  0.009817    2.497544  \n",
       "\n",
       "[498 rows x 9 columns]"
      ]
     },
     "execution_count": 27,
     "metadata": {},
     "output_type": "execute_result"
    }
   ],
   "source": [
    "'''\n",
    "Generate derive association rules for the online retail dataset.\n",
    "Here we use confidence as the measure of interestingness.\n",
    "Set the minimum threshold to 0.6.\n",
    "Return all metrics, not just support.\n",
    "'''\n",
    "\n",
    "rules = mlxtend.frequent_patterns.association_rules(\n",
    "    apriori_model_colnames, \n",
    "    metric=\"confidence\",\n",
    "    min_threshold=0.6, \n",
    "    support_only=False\n",
    ")\n",
    "\n",
    "rules"
   ]
  },
  {
   "cell_type": "code",
   "execution_count": 28,
   "metadata": {},
   "outputs": [
    {
     "name": "stdout",
     "output_type": "stream",
     "text": [
      "Number of Associations: 498\n"
     ]
    }
   ],
   "source": [
    "print(\"Number of Associations: {}\".format(rules.shape[0]))"
   ]
  },
  {
   "cell_type": "code",
   "execution_count": 29,
   "metadata": {},
   "outputs": [
    {
     "data": {
      "image/png": "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\n",
      "text/plain": [
       "<Figure size 432x288 with 1 Axes>"
      ]
     },
     "metadata": {
      "needs_background": "light"
     },
     "output_type": "display_data"
    }
   ],
   "source": [
    "rules.plot.scatter(\"support\", \"confidence\", alpha=0.5, marker=\"*\")\n",
    "plt.xlabel(\"Support\")\n",
    "plt.ylabel(\"Confidence\")\n",
    "plt.title(\"Association Rules\")\n",
    "plt.show()"
   ]
  },
  {
   "cell_type": "markdown",
   "metadata": {},
   "source": [
    "### Initial Finding"
   ]
  },
  {
   "cell_type": "markdown",
   "metadata": {},
   "source": [
    "There are not any association rules with both extremly high confidence and extremely high support.\n",
    "\n",
    "This make sense. If an item set has high support, the items are likely to appear with many other items, making the chances of high confidence very low."
   ]
  },
  {
   "cell_type": "markdown",
   "metadata": {},
   "source": [
    "## Conclusion"
   ]
  },
  {
   "cell_type": "markdown",
   "metadata": {},
   "source": [
    "With this kind of analysis from the field of mareting you can now determine which products are most often bought in combination with each other. With this knowledge it is possible to arrange the products efficiently in the store. In the best case, products that are often bought together are positioned in the opposite direction in the store so that customers are forced to walk past as many other products as possible.\n",
    "\n",
    "Furthermore, one can now consider targeted discount campaigns. If you discount a product that is often bought in combination with others, you increase the chance of buying these products in combination, whereby a small discount is granted on only one."
   ]
  },
  {
   "cell_type": "markdown",
   "metadata": {},
   "source": [
    "References\n",
    "https://michael-fuchs-python.netlify.app/2020/09/15/marketing-market-basket-analysis/"
   ]
  }
 ],
 "metadata": {
  "kernelspec": {
   "display_name": "Python 3",
   "language": "python",
   "name": "python3"
  },
  "language_info": {
   "codemirror_mode": {
    "name": "ipython",
    "version": 3
   },
   "file_extension": ".py",
   "mimetype": "text/x-python",
   "name": "python",
   "nbconvert_exporter": "python",
   "pygments_lexer": "ipython3",
   "version": "3.8.5"
  }
 },
 "nbformat": 4,
 "nbformat_minor": 4
} Artificial_-intelligences
